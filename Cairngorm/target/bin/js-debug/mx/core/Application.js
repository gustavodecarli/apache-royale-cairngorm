/**
 * Generated by Apache Royale Compiler from mx/core/Application.as
 * mx.core.Application
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('mx.core.Application');
/* Royale Dependency List: mx.containers.beads.ApplicationLayout,mx.containers.beads.BoxLayout,mx.core.ContainerLayout,mx.core.FlexGlobals,mx.events.KeyboardEvent,mx.events.utils.FocusEventConverter,mx.events.utils.KeyboardEventConverter,mx.events.utils.MouseEventConverter,mx.managers.FocusManager,mx.managers.ISystemManager,org.apache.royale.binding.ContainerDataBinding,org.apache.royale.core.AllCSSValuesImpl,org.apache.royale.core.ElementWrapper,org.apache.royale.core.IBeadLayout,org.apache.royale.core.IValuesImpl,org.apache.royale.core.ValuesManager,org.apache.royale.events.ElementEvents,org.apache.royale.events.Event,org.apache.royale.reflection.beads.ClassAliasBead,org.apache.royale.utils.Timer,org.apache.royale.utils.Language,XML*/

goog.require('mx.core.Container');
goog.require('org.apache.royale.core.IPopUpHost');
goog.require('org.apache.royale.core.IPopUpHostParent');
goog.require('org.apache.royale.core.IFlexInfo');
goog.require('org.apache.royale.core.IParent');
goog.require('org.apache.royale.core.IRenderedObject');
goog.require('org.apache.royale.core.IStrand');
goog.require('org.apache.royale.events.IEventDispatcher');



/**
 *  Constructor.
 *  
 *  @langversion 3.0
 *  @playerversion Flash 9
 *  @playerversion AIR 1.1
 *  @productversion Flex 3
 * @constructor
 * @extends {mx.core.Container}
 * @implements {org.apache.royale.core.IStrand}
 * @implements {org.apache.royale.core.IParent}
 * @implements {org.apache.royale.events.IEventDispatcher}
 * @implements {org.apache.royale.core.IPopUpHost}
 * @implements {org.apache.royale.core.IPopUpHostParent}
 * @implements {org.apache.royale.core.IRenderedObject}
 * @implements {org.apache.royale.core.IFlexInfo}
 */
mx.core.Application = function() {
  
  this.mx_core_Application__layout = mx.core.ContainerLayout.VERTICAL;
  if (!mx.core.FlexGlobals.topLevelApplication)
    mx.core.FlexGlobals.topLevelApplication = this;
  mx.core.Application.base(this, 'constructor');
  this.typeNames += " Application";
  this.valuesImpl = new org.apache.royale.core.AllCSSValuesImpl();
  this.addBead(new org.apache.royale.binding.ContainerDataBinding());
  this.addBead(new mx.containers.beads.ApplicationLayout());
  this.addBead(new org.apache.royale.reflection.beads.ClassAliasBead());
  this.mx_core_Application_instanceParent = this;
};
goog.inherits(mx.core.Application, mx.core.Container);


/**
 * Prevent renaming of class. Needed for reflection.
 */
goog.exportSymbol('mx.core.Application', mx.core.Application);


/**
 * @private
 * @type {Object}
 */
mx.core.Application.prototype.mx_core_Application__info;


/**
 *  An Object containing information generated
 *  by the compiler that is useful at startup time.
 * 
 *  @langversion 3.0
 *  @playerversion Flash 10.2
 *  @playerversion AIR 2.6
 *  @productversion Royale 0.0
 * @export
 * @return {Object}
 */
mx.core.Application.prototype.info = function() {
  
  return this.mx_core_Application__info;
};


/**
 * @private
 * @type {Object}
 */
mx.core.Application.prototype.mx_core_Application__parameters;


/**
 * @private
 * @type {mx.core.Application}
 */
mx.core.Application.prototype.mx_core_Application_instanceParent;


/**
 * @private
 * @type {string}
 */
mx.core.Application.prototype.mx_core_Application__layout;


/**
 * @private
 * @type {string}
 */
mx.core.Application.prototype.mx_core_Application__url;


/**
 * @export
 * @override
 */
mx.core.Application.prototype.createChildren = function() {
  org.apache.royale.events.ElementEvents.elementEvents["focusin"] = 1;
  org.apache.royale.events.ElementEvents.elementEvents["focusout"] = 1;
  mx.core.Application.superClass_.createChildren.apply(this);
  this.dispatchEvent(new org.apache.royale.events.Event("viewChanged"));
};


/**
 *  @asprivate
 * @private
 */
mx.core.Application.prototype.mx_core_Application_initManagers = function() {
  this.focusManager = new mx.managers.FocusManager(this);
};


/**
 * @export
 * @type {org.apache.royale.utils.Timer}
 */
mx.core.Application.prototype.startupTimer;


/**
 * @private
 * @type {boolean}
 */
mx.core.Application.prototype.mx_core_Application__started = false;


/**
 * @export
 * @override
 */
mx.core.Application.prototype.setActualSize = function(w, h) {
  mx.core.Application.superClass_.setActualSize.apply(this, [ w, h] );
  if (!this.mx_core_Application__started) {
    this.start();
    this.mx_core_Application__started = true;
  }
};


/**
 * @royaleignorecoercion org.apache.royale.core.IBead
 * @export
 */
mx.core.Application.prototype.start = function() {
  if (this.dispatchEvent(new org.apache.royale.events.Event("preinitialize", false, true)))
    this.initializeApplication(); else {
    this.startupTimer = new org.apache.royale.utils.Timer(34, 0);
    this.startupTimer.addEventListener("timer", org.apache.royale.utils.Language.closure(this.handleStartupTimer, this, 'handleStartupTimer'));
    this.startupTimer.start();
  }
};


/**
 * @asprivate
 * @export
 * @param {org.apache.royale.events.Event} event
 */
mx.core.Application.prototype.handleStartupTimer = function(event) {
  if (this.dispatchEvent(new org.apache.royale.events.Event("preinitialize", false, true))) {
    this.startupTimer.stop();
    this.initializeApplication();
  }
};


/**
 * @royaleignorecoercion org.apache.royale.core.IBead
 * @export
 */
mx.core.Application.prototype.initializeApplication = function() {
  org.apache.royale.core.ElementWrapper.converterMap["MouseEvent"] = mx.events.utils.MouseEventConverter;
  org.apache.royale.core.ElementWrapper.converterMap["KeyboardEvent"] = mx.events.utils.KeyboardEventConverter;
  org.apache.royale.core.ElementWrapper.converterMap["FocusEvent"] = mx.events.utils.FocusEventConverter;
  this.addEventListener(mx.events.KeyboardEvent.KEY_DOWN, org.apache.royale.utils.Language.closure(this.keyDownForCapsLockHandler, this, 'keyDownForCapsLockHandler'));
  this.mx_core_Application_initManagers();
  this.dispatchEvent(new org.apache.royale.events.Event("applicationComplete"));
};


/**
 * @export
 * @param {mx.events.KeyboardEvent} event
 */
mx.core.Application.prototype.keyDownForCapsLockHandler = function(event) {
};


mx.core.Application.prototype.get__parameters = function() {
  
  if (!this.mx_core_Application__parameters) {
    this.mx_core_Application__parameters = {};
    var /** @type {string} */ query = location.search.substring(1);
    if (query) {
      var /** @type {Array} */ vars = query.split("&");
      for (var /** @type {number} */ i = 0; i < vars.length; i++) {
        var /** @type {Array} */ pair = vars[i].split("=");
        this.mx_core_Application__parameters[pair[0]] = decodeURIComponent(org.apache.royale.utils.Language.string(pair[1]));
      }
    }
  }
  return this.mx_core_Application__parameters;
};


mx.core.Application.prototype.set__parameters = function(value) {
  this.mx_core_Application__parameters = value;
};


mx.core.Application.prototype.set__valuesImpl = function(value) {
  org.apache.royale.core.ValuesManager["valuesImpl"] = value;
  org.apache.royale.core.ValuesManager["valuesImpl"].init(this);
};


mx.core.Application.prototype.get__layout = function() {
  return this.mx_core_Application__layout;
};


mx.core.Application.prototype.set__layout = function(value) {
  if (value != this.mx_core_Application__layout) {
    var /** @type {org.apache.royale.core.IBeadLayout} */ layoutBead = org.apache.royale.utils.Language.as(this.getBeadByType(org.apache.royale.core.IBeadLayout), org.apache.royale.core.IBeadLayout);
    if (org.apache.royale.utils.Language.is(layoutBead, mx.containers.beads.BoxLayout)) {
      org.apache.royale.utils.Language.as(layoutBead, mx.containers.beads.BoxLayout).direction = value;
    }
  }
};


mx.core.Application.prototype.get__url = function() {
  return this.mx_core_Application__url;
};


mx.core.Application.prototype.get__popUpParent = function() {
  return org.apache.royale.utils.Language.as(this.systemManager, org.apache.royale.core.IPopUpHostParent);
  
};


mx.core.Application.prototype.get__systemManager = function() {
  return org.apache.royale.utils.Language.as(this.parent, mx.managers.ISystemManager);
};


mx.core.Application.prototype.get__popUpHost = function() {
  return this;
};


Object.defineProperties(mx.core.Application.prototype, /** @lends {mx.core.Application.prototype} */ {
/**
  * @export
  * @type {Object} */
parameters: {
get: mx.core.Application.prototype.get__parameters,
set: mx.core.Application.prototype.set__parameters},
/**
  * @export
  * @type {org.apache.royale.core.IValuesImpl} */
valuesImpl: {
set: mx.core.Application.prototype.set__valuesImpl},
/**
  * @export
  * @type {string} */
layout: {
get: mx.core.Application.prototype.get__layout,
set: mx.core.Application.prototype.set__layout},
/**
  * @export
  * @type {string} */
url: {
get: mx.core.Application.prototype.get__url},
/**
  * @export
  * @type {org.apache.royale.core.IPopUpHostParent} */
popUpParent: {
get: mx.core.Application.prototype.get__popUpParent},
/**
  * @export
  * @type {mx.managers.ISystemManager} */
systemManager: {
get: mx.core.Application.prototype.get__systemManager,
set: mx.core.UIComponent.prototype.set__systemManager},
/**
  * @export
  * @type {org.apache.royale.core.IPopUpHost} */
popUpHost: {
get: mx.core.Application.prototype.get__popUpHost}}
);


mx.core.Application.get__application = function() {
  return mx.core.FlexGlobals.topLevelApplication;
};


Object.defineProperties(mx.core.Application, /** @lends {mx.core.Application} */ {
/**
  * @export
  * @type {Object} */
application: {
get: mx.core.Application.get__application}}
);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
mx.core.Application.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'Application', qName: 'mx.core.Application', kind: 'class' }], interfaces: [org.apache.royale.core.IStrand, org.apache.royale.core.IParent, org.apache.royale.events.IEventDispatcher, org.apache.royale.core.IPopUpHost, org.apache.royale.core.IPopUpHostParent, org.apache.royale.core.IRenderedObject, org.apache.royale.core.IFlexInfo] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
mx.core.Application.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    accessors: function () {
      return {
        '|application': { type: 'Object', access: 'readonly', declaredBy: 'mx.core.Application'},
        'parameters': { type: 'Object', access: 'readwrite', declaredBy: 'mx.core.Application'},
        'valuesImpl': { type: 'org.apache.royale.core.IValuesImpl', access: 'writeonly', declaredBy: 'mx.core.Application'},
        'layout': { type: 'String', access: 'readwrite', declaredBy: 'mx.core.Application', metadata: function () { return [ { name: 'Bindable', args: [ { key: '', value: 'layoutChanged' } ] } ]; }},
        'url': { type: 'String', access: 'readonly', declaredBy: 'mx.core.Application'},
        'popUpParent': { type: 'org.apache.royale.core.IPopUpHostParent', access: 'readonly', declaredBy: 'mx.core.Application'},
        'systemManager': { type: 'mx.managers.ISystemManager', access: 'readonly', declaredBy: 'mx.core.Application'},
        'popUpHost': { type: 'org.apache.royale.core.IPopUpHost', access: 'readonly', declaredBy: 'mx.core.Application'}
      };
    },
    methods: function () {
      return {
        'Application': { type: '', declaredBy: 'mx.core.Application'},
        'info': { type: 'Object', declaredBy: 'mx.core.Application'},
        'setActualSize': { type: 'void', declaredBy: 'mx.core.Application', parameters: function () { return [ 'Number', false ,'Number', false ]; }},
        'start': { type: 'void', declaredBy: 'mx.core.Application'},
        'initializeApplication': { type: 'void', declaredBy: 'mx.core.Application'},
        'keyDownForCapsLockHandler': { type: 'void', declaredBy: 'mx.core.Application', parameters: function () { return [ 'mx.events.KeyboardEvent', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
mx.core.Application.prototype.ROYALE_COMPILE_FLAGS = 26;
