/**
 * Generated by Apache Royale Compiler from mx/managers/SystemManager.as
 * mx.managers.SystemManager
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('mx.managers.SystemManager');
/* Royale Dependency List: mx.core.IUIComponent,mx.managers.SystemManagerGlobals,org.apache.royale.geom.Rectangle,org.apache.royale.utils.Language,XML*/

goog.require('mx.core.IChildList');
goog.require('mx.managers.SystemManagerBase');
goog.require('org.apache.royale.core.IPopUpHost');
goog.require('org.apache.royale.core.IPopUpHostParent');
goog.require('mx.core.IFlexModuleFactory');
goog.require('mx.managers.ISystemManager');
goog.require('org.apache.royale.events.IEventDispatcher');



/**
 *  Constructor.
 *
 *  <p>This is the starting point for all Flex applications.
 *  This class is set to be the root class of a Flex SWF file.
 *  Flash Player instantiates an instance of this class,
 *  causing this constructor to be called.</p>
 *  <p>In Royale Emulation, this class is not the starting point.
 *  It is created by the Application's starting point and wraps
 *  delegates work to the Application.</p>
 *  
 *  @langversion 3.0
 *  @playerversion Flash 9
 *  @playerversion AIR 1.1
 *  @productversion Royale 0.9.4
 * @constructor
 * @extends {mx.managers.SystemManagerBase}
 * @implements {mx.managers.ISystemManager}
 * @implements {mx.core.IFlexModuleFactory}
 * @implements {org.apache.royale.events.IEventDispatcher}
 * @implements {org.apache.royale.core.IPopUpHostParent}
 * @implements {org.apache.royale.core.IPopUpHost}
 * @implements {mx.core.IChildList}
 */
mx.managers.SystemManager = function() {
  
  this.mx_managers_SystemManager_implMap = {};
  mx.managers.SystemManager.base(this, 'constructor');
  
};
goog.inherits(mx.managers.SystemManager, mx.managers.SystemManagerBase);


/**
 * Prevent renaming of class. Needed for reflection.
 */
goog.exportSymbol('mx.managers.SystemManager', mx.managers.SystemManager);


/**
 * @export
 * @type {HTMLSpanElement}
 */
mx.managers.SystemManager.prototype.measuringElement;


/**
 * @export
 * @type {string}
 */
mx.managers.SystemManager.prototype.mainClassName;


/**
 * @private
 * @type {number}
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager_lastFrame = 0;


/**
 * @private
 * @type {Object}
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager__mxmlDocument;


/**
 * @private
 * @type {number}
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager__numModalWindows = 0;


/**
 * @private
 * @type {mx.core.IChildList}
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager__rawChildren;


/**
 * @private
 * @type {org.apache.royale.geom.Rectangle}
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager__screen;


/**
 *  @asprivate
 * @export
 * @param {mx.core.IUIComponent} child
 * @return {mx.core.IUIComponent}
 */
mx.managers.SystemManager.prototype.addChild = function(child) {
  return org.apache.royale.utils.Language.as(this.addElement(child), mx.core.IUIComponent);
  
};


/**
 *  @asprivate
 *  @royaleignorecoercion mx.core.IUIComponent
 * @export
 * @param {Object} child
 * @param {number} index
 * @return {Object}
 */
mx.managers.SystemManager.prototype.addChildAt = function(child, index) {
  return this.addElementAt(child, index);
  
};


/**
 *  @asprivate
 *  @royaleignorecoercion mx.core.IUIComponent
 * @export
 * @param {Object} child
 * @return {Object}
 */
mx.managers.SystemManager.prototype.removeChild = function(child) {
  return this.removeElement(child);
  
};


/**
 *  @asprivate
 *  @royaleignorecoercion mx.core.IUIComponent
 * @export
 * @param {number} index
 * @return {Object}
 */
mx.managers.SystemManager.prototype.removeChildAt = function(index) {
  org.apache.royale.utils.Language.trace("removeChildAt not implemented");
  return null;
};


/**
 *  @asprivate
 *  @royaleignorecoercion mx.core.IUIComponent
 * @export
 * @param {number} index
 * @return {Object}
 */
mx.managers.SystemManager.prototype.getChildAt = function(index) {
  return this.getElementAt(index);
  
};


/**
 *  A factory method that requests an instance of a
 *  definition known to the module.
 * 
 *  You can provide an optional set of parameters to let building
 *  factories change what they create based on the
 *  input. Passing null indicates that the default definition
 *  is created, if possible. 
 *
 *  This method is overridden in the autogenerated subclass.
 *
 *  @asparam params An optional list of arguments. You can pass
 *  any number of arguments, which are then stored in an Array
 *  called <code>parameters</code>. 
 *
 *  @asreturn An instance of the module, or <code>null</code>.
 *  
 *  @langversion 3.0
 *  @playerversion Flash 9
 *  @playerversion AIR 1.1
 *  @productversion Royale 0.9.4
 * @export
 * @param {...} params
 * @return {Object}
 */
mx.managers.SystemManager.prototype.create = function(params) {
  params = Array.prototype.slice.call(arguments, 0);
  
  if (this.mainClassName)
    return new this.mainClassName();
  return null;
};


/**
 *  @asprivate
 * @export
 * @return {Object}
 */
mx.managers.SystemManager.prototype.info = function() {
  
  return this.mainClassName.prototype.info();
};


/**
 *  The JavaScript entry point.
 * @export
 * @param {Object=} parameters
 */
mx.managers.SystemManager.prototype.start = function(parameters) {
  parameters = typeof parameters !== 'undefined' ? parameters : null;
  var /** @type {HTMLElement} */ body = document.getElementsByTagName('body')[0];
  body.appendChild(this.element);
  this.element.className = "royale";
  mx.managers.SystemManagerGlobals.info = this.info();
  var /** @type {Array} */ mixinList = this.info()["mixins"];
  if (mixinList && mixinList.length > 0) {
    var /** @type {number} */ n = (mixinList.length) >> 0;
    for (var /** @type {number} */ i = 0; i < n; ++i) {
      mixinList[i]['init'](this);
    }
  }
  if (!mx.managers.SystemManagerGlobals.info)
    mx.managers.SystemManagerGlobals.info = this.info();
  if (!mx.managers.SystemManagerGlobals.parameters)
    mx.managers.SystemManagerGlobals.parameters = parameters;
  this.mx_managers_SystemManager_initializeTopLevelWindow(null);
};


/**
 *  @asprivate
 *  Instantiates an instance of the top level window
 *  and adds it as a child of the SystemManager.
 * @private
 * @param {Event} event
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager_initializeTopLevelWindow = function(event) {
  this.mxmlDocument = org.apache.royale.utils.Language.as(this.create(), mx.core.IUIComponent, true);
  if (mx.managers.SystemManagerGlobals.parameters)
    this.mxmlDocument["parameters"] = mx.managers.SystemManagerGlobals.parameters;
  this.mxmlDocument.addEventListener("applicationComplete", org.apache.royale.utils.Language.closure(this.mx_managers_SystemManager_applicationCompleteHandler, this, 'applicationCompleteHandler'));
  this.mxmlDocument.moduleFactory = this;
  this.addChild(org.apache.royale.utils.Language.as(this.mxmlDocument, mx.core.IUIComponent));
  var /** @type {org.apache.royale.geom.Rectangle} */ screen = this.screen;
  this.mxmlDocument.setActualSize(screen.width, screen.height);
  window.addEventListener('resize', org.apache.royale.utils.Language.closure(this.mx_managers_SystemManager_resizeHandler, this, 'resizeHandler'), false);
};


/**
 * @royaleignorecoercion org.apache.royale.core.ILayoutChild
 * @private
 * @param {Event} event
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager_resizeHandler = function(event) {
  this.mx_managers_SystemManager__screen = null;
  var /** @type {org.apache.royale.geom.Rectangle} */ screen = this.screen;
  this.mxmlDocument.setActualSize(screen.width, screen.height);
};


/**
 * @private
 * @param {Event} event
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager_applicationCompleteHandler = function(event) {
  this.dispatchEvent(event);
};


/**
 *  Go up the parent chain to get the top level system manager in this 
 *  SecurityDomain.
 * 
 *  @asreturn The root system manager in this SecurityDomain.
 *  
 *  @langversion 3.0
 *  @playerversion Flash 9
 *  @playerversion AIR 1.1
 *  @productversion Royale 0.9.4
 * @export
 * @return {Object}
 */
mx.managers.SystemManager.prototype.getSandboxRoot = function() {
  return this;
};


/**
 * @private
 * @type {Object}
 */
mx.managers.SystemManager.prototype.mx_managers_SystemManager_implMap;


/**
 * @asprivate
 *  Returns the singleton instance of the implementation class
 *  that was registered for the specified interface,
 *  by looking up the class in the registry
 *  and calling its getInstance() method.
 * 
 *  This method should not be called at static initialization time,
 *  because the factory class may not have called registerClass() yet.
 * @export
 * @param {string} interfaceName
 * @return {Object}
 */
mx.managers.SystemManager.prototype.getImplementation = function(interfaceName) {
  var /** @type {Object} */ c = this.mx_managers_SystemManager_implMap[interfaceName];
  return c;
};


/**
 *  @asprivate
 * @export
 * @param {mx.core.IUIComponent} child
 * @param {number} index
 */
mx.managers.SystemManager.prototype.setChildIndex = function(child, index) {
  org.apache.royale.utils.Language.trace("setChildIndex not implemented");
};


/**
 *  @asprivate
 * @export
 * @param {mx.core.IUIComponent} child
 * @return {number}
 */
mx.managers.SystemManager.prototype.getChildIndex = function(child) {
  return this.getElementIndex(child);
  
};


/**
 *  @asprivate
 * @export
 * @param {string} name
 * @return {mx.core.IUIComponent}
 */
mx.managers.SystemManager.prototype.getChildByName = function(name) {
  org.apache.royale.utils.Language.trace("getChildByName not implemented");
  return null;
};


/**
 *  @asprivate
 * @export
 * @param {mx.core.IUIComponent} child
 * @return {boolean}
 */
mx.managers.SystemManager.prototype.contains = function(child) {
  
  return this.element.contains(child.element);
};


mx.managers.SystemManager.prototype.get__mxmlDocument = function() {
  return this.mx_managers_SystemManager__mxmlDocument;
};


mx.managers.SystemManager.prototype.set__mxmlDocument = function(value) {
  this.mx_managers_SystemManager__mxmlDocument = value;
};


mx.managers.SystemManager.prototype.get__numModalWindows = function() {
  return this.mx_managers_SystemManager__numModalWindows;
};


mx.managers.SystemManager.prototype.set__numModalWindows = function(value) {
  this.mx_managers_SystemManager__numModalWindows = value;
};


mx.managers.SystemManager.prototype.get__rawChildren = function() {
  return this;
};


mx.managers.SystemManager.prototype.get__screen = function() {
  
  if (!this.mx_managers_SystemManager__screen) {
    var /** @type {number} */ w = window.innerWidth;
    var /** @type {number} */ h = window.innerHeight;
    var /** @type {Object} */ s = getComputedStyle(document.body);
    var /** @type {string} */ v = org.apache.royale.utils.Language.string(s["marginLeft"]);
    v = v.replace("px", "");
    var /** @type {number} */ ml = parseFloat(v);
    v = org.apache.royale.utils.Language.string(s["marginRight"]);
    v = v.replace("px", "");
    var /** @type {number} */ mr = parseFloat(v);
    v = org.apache.royale.utils.Language.string(s["marginTop"]);
    v = v.replace("px", "");
    var /** @type {number} */ mt = parseFloat(v);
    v = org.apache.royale.utils.Language.string(s["marginBottom"]);
    v = v.replace("px", "");
    var /** @type {number} */ mb = parseFloat(v);
    this.mx_managers_SystemManager__screen = new org.apache.royale.geom.Rectangle(0, 0, w - ml - mr, h - mt - mb);
  }
  return this.mx_managers_SystemManager__screen;
};


mx.managers.SystemManager.prototype.get__numChildren = function() {
  return this.numElements;
};


mx.managers.SystemManager.prototype.get__popUpHost = function() {
  return org.apache.royale.utils.Language.as(this.mxmlDocument, org.apache.royale.core.IPopUpHost);
};


mx.managers.SystemManager.prototype.get__popUpParent = function() {
  return this;
};


Object.defineProperties(mx.managers.SystemManager.prototype, /** @lends {mx.managers.SystemManager.prototype} */ {
/**
  * @export
  * @type {Object} */
mxmlDocument: {
get: mx.managers.SystemManager.prototype.get__mxmlDocument,
set: mx.managers.SystemManager.prototype.set__mxmlDocument},
/**
  * @export
  * @type {number} */
numModalWindows: {
get: mx.managers.SystemManager.prototype.get__numModalWindows,
set: mx.managers.SystemManager.prototype.set__numModalWindows},
/**
  * @export
  * @type {mx.core.IChildList} */
rawChildren: {
get: mx.managers.SystemManager.prototype.get__rawChildren},
/**
  * @export
  * @type {org.apache.royale.geom.Rectangle} */
screen: {
get: mx.managers.SystemManager.prototype.get__screen},
/**
  * @export
  * @type {number} */
numChildren: {
get: mx.managers.SystemManager.prototype.get__numChildren},
/**
  * @export
  * @type {org.apache.royale.core.IPopUpHost} */
popUpHost: {
get: mx.managers.SystemManager.prototype.get__popUpHost},
/**
  * @export
  * @type {org.apache.royale.core.IPopUpHostParent} */
popUpParent: {
get: mx.managers.SystemManager.prototype.get__popUpParent}}
);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
mx.managers.SystemManager.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'SystemManager', qName: 'mx.managers.SystemManager', kind: 'class' }], interfaces: [mx.managers.ISystemManager, mx.core.IFlexModuleFactory, org.apache.royale.events.IEventDispatcher, org.apache.royale.core.IPopUpHostParent, org.apache.royale.core.IPopUpHost, mx.core.IChildList] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
mx.managers.SystemManager.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    variables: function () {
      return {
        'measuringElement': { type: 'HTMLSpanElement', get_set: function (/** mx.managers.SystemManager */ inst, /** * */ v) {return v !== undefined ? inst.measuringElement = v : inst.measuringElement;}},
        'mainClassName': { type: 'String', get_set: function (/** mx.managers.SystemManager */ inst, /** * */ v) {return v !== undefined ? inst.mainClassName = v : inst.mainClassName;}}
      };
    },
    accessors: function () {
      return {
        'mxmlDocument': { type: 'Object', access: 'readwrite', declaredBy: 'mx.managers.SystemManager'},
        'numModalWindows': { type: 'int', access: 'readwrite', declaredBy: 'mx.managers.SystemManager'},
        'rawChildren': { type: 'mx.core.IChildList', access: 'readonly', declaredBy: 'mx.managers.SystemManager'},
        'screen': { type: 'org.apache.royale.geom.Rectangle', access: 'readonly', declaredBy: 'mx.managers.SystemManager'},
        'numChildren': { type: 'int', access: 'readonly', declaredBy: 'mx.managers.SystemManager'},
        'popUpHost': { type: 'org.apache.royale.core.IPopUpHost', access: 'readonly', declaredBy: 'mx.managers.SystemManager'},
        'popUpParent': { type: 'org.apache.royale.core.IPopUpHostParent', access: 'readonly', declaredBy: 'mx.managers.SystemManager'}
      };
    },
    methods: function () {
      return {
        'SystemManager': { type: '', declaredBy: 'mx.managers.SystemManager'},
        'addChild': { type: 'mx.core.IUIComponent', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'mx.core.IUIComponent', false ]; }},
        'addChildAt': { type: 'mx.core.IUIComponent', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'mx.core.IUIComponent', false ,'int', false ]; }},
        'removeChild': { type: 'mx.core.IUIComponent', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'mx.core.IUIComponent', false ]; }},
        'removeChildAt': { type: 'mx.core.IUIComponent', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'int', false ]; }},
        'getChildAt': { type: 'mx.core.IUIComponent', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'int', false ]; }},
        'create': { type: 'Object', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'Array', false ]; }},
        'info': { type: 'Object', declaredBy: 'mx.managers.SystemManager'},
        'start': { type: 'void', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'Object', true ]; }},
        'getSandboxRoot': { type: 'Object', declaredBy: 'mx.managers.SystemManager'},
        'getImplementation': { type: 'Object', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'String', false ]; }},
        'setChildIndex': { type: 'void', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'mx.core.IUIComponent', false ,'int', false ]; }},
        'getChildIndex': { type: 'int', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'mx.core.IUIComponent', false ]; }},
        'getChildByName': { type: 'mx.core.IUIComponent', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'String', false ]; }},
        'contains': { type: 'Boolean', declaredBy: 'mx.managers.SystemManager', parameters: function () { return [ 'mx.core.IUIComponent', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
mx.managers.SystemManager.prototype.ROYALE_COMPILE_FLAGS = 26;
